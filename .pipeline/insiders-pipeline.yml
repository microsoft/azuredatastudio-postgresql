trigger: none
pr: none
variables:
- name: version
  value: v1.8.0-insiders-20230614.8
strategy:
  matrix:
    linux:
      platform: 'ubuntu'
      imageName: 'ubuntu-latest'
      archiveType: 'tar'
    mac-x64:
      platform: 'mac-x64'
      imageName: 'macOS-latest'
      archiveType: 'tar'
    mac-arm64:
      platform: 'mac-arm64'
      imageName: 'macOS-latest'
    windows:
      platform: 'windows'
      imageName: 'windows-latest'
pool:
  vmImage: $(imageName)
steps:
- template: templates/build.yml
- template: templates/code-sign.yml
- task: CopyFiles@2
  inputs:
    sourceFolder: '$(Build.SourcesDirectory)'
    contents: '*.vsix'
    targetFolder: '$(Build.ArtifactStagingDirectory)'
  displayName: 'Copy Files'
- task: PublishBuildArtifacts@1
  inputs:
    pathToPublish: '$(Build.ArtifactStagingDirectory)'
    artifactName: build
  displayName: 'Publish Artifacts'